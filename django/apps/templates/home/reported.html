{% extends "layouts/base.html" %}
{% block title %}  {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
{% if messages %}
{% for message in messages %}
    <p class="d-none" id="messagetag">{{message.tags}}</p>
    <p class="d-none " id="messagecontent">{{message}}</p>
{% endfor %}
{% endif %}

<link href="../../../static/img/favicon.ico" rel="icon">

<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

<!-- Libraries Stylesheet -->
<link href="../../../static/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

<!-- Customized Bootstrap Stylesheet -->
<link href="../../../static/css/style.css" rel="stylesheet">


<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4">
    <div class="d-block mb-4 mb-md-0">
      <h5 class="h5"> <b>Reported Issues</b> </h5>
    </div>

</div>


<div class="card card-body border-0 table-wrapper table-responsive" style="box-shadow: 0 0px 10px rgba(202,194,247,0.59)">
    <table class="table table-hover">
        <thead>
          <tr>
            <th >ID</th>
            <th >username</th>
            <th >Role</th>
            <th >Hire Id</th>
            <th >Email</th>
            <th >Phone</th>
            <th >Image Linked</th>
            <th >Issue</th>
            <th >Option</th>
            <th ></th>
          </tr>
        </thead>
        <tbody>

          {% for data in report %}

          <tr>
            <td>{{data.id}}</td>
            <td>{{data.username}}</td>
            <td>{%if data.woh%}Worker{%else%}Hirer{%endif%}</td>
            <td>{{data.hireid}}</td>

            <td>{{data.email}}</td>
            <td>{{data.phone}}</td>
            <td><img src="{{data.proof.url}}" width="200px"></img></td>
            <td style="white-space:pre-wrap; word-wrap:break-word">{{data.issue}}</td>





            
            
            <!-- Modal -->
            <div class="modal fade" id="exampleModal{{data.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Choose one</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <a href="{%url 'refundhirerfull' data.id %}"><button type="button" class="btn btn-success mx-auto" style="width:50%:">Hirer Refund(100%)</button></a>
                    <a href="{%url 'refundworkerfull' data.id %}"><button type="button" class="btn btn-success mx-auto " style="width:50%:">Worker Reund (100%)</button></a>
                  </div>
                  <div class="modal-footer">
                    <a href="{%url 'refundsplit' data.id %}"><button type="button" class="btn btn-warning mx-auto" style="width:50%:">Split Amount (50%)</button></a>
                    
                    {% comment %} <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button> {% endcomment %}
                  </div>
                </div>
              </div>
            </div>
            



            {% comment %} <td><a class="btn btn-success">Refund</a></td> {% endcomment %}
            {% comment %} <td><a class="btn rounded-3 text-success border" style="box-shadow: 0 0px 10px rgba(202,194,247,0.59)" data-target="#selectModal{{data.id}}" data-toggle="modal" class=" btn border rounded-3">Refund</a>
            <a class="btn text-danger rounded-3 border shadow-sm" style="box-shadow: 0 0px 10px rgba(202,194,247,0.59)">Cancel</a></td>
             {% endcomment %}
            <td><button type="button" class="btn text-success rounded-3 border shadow-sm" data-bs-toggle="modal" data-bs-target="#exampleModal{{data.id}}">
              Refund
            </button>
            <a class="btn text-danger rounded-3 border shadow-sm" style="box-shadow: 0 0px 10px rgba(202,194,247,0.59)">Cancel</a></td>
            

        </tr>

        {% endfor %}

        </tbody>
    </table>
   
</div> 
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<script src="lib/easing/easing.min.js"></script>
<script src="lib/owlcarousel/owl.carousel.min.js"></script>

<!-- Contact Javascript File -->
<script src="mail/jqBootstrapValidation.min.js"></script>
<script src="mail/contact.js"></script>

<!-- Template Javascript -->
<script src="js/main.js"></script>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
